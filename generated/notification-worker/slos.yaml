slos:
- kind: SLO
  name: delivery-success
  spec:
    indicators:
    - success_ratio:
        good_query: sum(rate(notifications_sent_total{service="notification-worker",status="delivered"}[5m]))
        total_query: sum(rate(notifications_sent_total{service="notification-worker"}[5m]))
      type: availability
    objective: 99.5
    window: 30d
- kind: SLO
  name: processing-latency-p95
  spec:
    indicators:
    - latency_query: histogram_quantile(0.95, rate(notification_processing_duration_seconds_bucket{service="notification-worker"}[5m]))
      percentile: 95
      threshold_ms: 5000
      type: latency
    objective: 98.0
    window: 30d
- kind: SLO
  name: queue-lag
  spec:
    indicators:
    - metric: max(kafka_consumer_lag_seconds{service="notification-worker",topic="notifications"})
      threshold: 100
      type: custom
    objective: 99.0
    window: 30d
