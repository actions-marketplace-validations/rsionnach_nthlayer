apiVersion: nthlayer.dev/v1
kind: Service

service:
  name: payment-api
  team: payments
  tier: critical
  type: api

resources:
  - kind: SLO
    name: availability
    spec:
      objective: 99.95
      window: 30d
      indicators:
        - type: availability

  - kind: SLO
    name: latency-p95
    spec:
      objective: 99.0
      window: 30d
      indicators:
        - type: latency
          threshold_ms: 500
          percentile: 95

  - kind: Dependencies
    name: deps
    spec:
      databases:
        - type: postgresql
          name: payments_db
        - type: redis
          name: payments_cache

  - kind: PagerDuty
    name: pagerduty
    spec:
      escalation_policy: payments-critical
      urgency: high
