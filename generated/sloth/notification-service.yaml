version: prometheus/v1
service: notification-service
labels:
  tier: standard
  team: platform
  type: background-job
slos:
- name: job-success-rate
  objective: 99.5
  description: 99.5% job success rate
  sli:
    events:
      error_query: sum(rate(job_runs{service="notification-service",status="success"}[5m]))
      total_query: sum(rate(job_runs{service="notification-service"}[5m]))
  alerting:
    name: NotificationServiceJobSuccessRate
    labels:
      tier: standard
      service: notification-service
    annotations:
      summary: SLO job-success-rate for notification-service
    ticket_alert:
      labels:
        severity: warning
      annotations:
        summary: Error budget burn on notification-service
- name: processing-time-p95
  objective: 95.0
  description: 95.0% processing time p95
  sli:
    events:
      error_query: "histogram_quantile(0.95,\n  rate(job_duration_seconds_bucket{service=\"\
        notification-service\"}[5m])\n)\n > 5.0"
      total_query: "sum(rate(0.95,\n  rate(job_duration_seconds_bucket{service=\"\
        notification-service\"}[5m])\n)\n)"
  alerting:
    name: NotificationServiceProcessingTimeP95
    labels:
      tier: standard
      service: notification-service
    annotations:
      summary: SLO processing-time-p95 for notification-service
    ticket_alert:
      labels:
        severity: warning
      annotations:
        summary: Error budget burn on notification-service
