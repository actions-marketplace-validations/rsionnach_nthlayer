slos:
- kind: SLO
  name: processing-availability
  spec:
    indicators:
    - success_ratio:
        good_query: sum(rate(events_processed_total{service="analytics-stream",status="success"}[5m]))
        total_query: sum(rate(events_processed_total{service="analytics-stream"}[5m]))
      type: availability
    objective: 99.5
    window: 30d
- kind: SLO
  name: stream-lag
  spec:
    indicators:
    - metric: max(kafka_consumer_lag_seconds{service="analytics-stream",topic="events"})
      threshold: 60
      type: custom
    objective: 99.0
    window: 30d
- kind: SLO
  name: event-latency-p99
  spec:
    indicators:
    - latency_query: histogram_quantile(0.99, rate(event_processing_duration_seconds_bucket{service="analytics-stream"}[5m]))
      percentile: 99
      threshold_ms: 10000
      type: latency
    objective: 95.0
    window: 30d
